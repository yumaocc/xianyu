# 启动脚本使用说明

## 优化内容

已优化 `start-all-dev.sh` 脚本，现在会：

1. ✅ 自动检测使用的终端应用（iTerm2 或 Terminal）
2. ✅ 在独立的终端窗口中启动每个服务
3. ✅ 为每个窗口设置清晰的标题（方便识别）
4. ✅ 自动激活终端应用，确保窗口显示在前台
5. ✅ 实时显示每个服务的日志输出

## 使用方法

```bash
cd /Users/q/Desktop/xianyu
./start-all-dev.sh
```

按回车后，会自动打开3个终端窗口：
- **闲鱼后端 API (5000)** - 后端服务日志
- **闲鱼 AI Agent** - AI Agent 日志
- **闲鱼前端 (8000)** - 前端开发服务器日志

## 如果窗口没有打开

### 第一次运行可能需要授权

macOS 系统可能会提示授权请求，这是正常的安全机制。

#### 授权步骤：

1. 运行脚本后，系统会弹出授权提示
2. 点击"允许"或"OK"
3. 如果没有弹出，需要手动授权：

**系统设置 → 隐私与安全性 → 自动化**

找到 **Terminal** 或 **iTerm2**，勾选：
- ✅ Terminal (或 iTerm2)
- ✅ System Events

### 手动授权路径：

```
系统设置 (System Settings)
  └─ 隐私与安全性 (Privacy & Security)
      └─ 自动化 (Automation)
          └─ Terminal (或 iTerm2)
              └─ ✅ Terminal
              └─ ✅ System Events
```

## 窗口说明

每个窗口的标题会显示服务名称：

| 窗口标题 | 服务 | 端口 | 说明 |
|---------|------|------|------|
| 闲鱼后端 API (5000) | Web API | 5000 | 后端接口服务 |
| 闲鱼 AI Agent | Agent | - | AI 智能客服 |
| 闲鱼前端 (8000) | Frontend | 8000 | Web 管理界面 |

## 停止服务

有两种方式：

1. **关闭终端窗口** - 直接关闭对应的窗口即可停止服务
2. **按 Ctrl+C** - 在窗口中按下 Ctrl+C 停止服务

## 查看日志

每个服务的日志会实时显示在对应的终端窗口中，无需额外配置。

## 故障排除

### 问题1: 权限被拒绝
```
错误: operation not permitted
```
**解决**: 按照上面的"授权步骤"进行授权

### 问题2: 脚本无法执行
```
permission denied
```
**解决**:
```bash
chmod +x start-all-dev.sh
```

### 问题3: 窗口打开但服务没启动
**检查**:
- 确保各个 start-*.sh 脚本都有执行权限
- 检查 Python 虚拟环境是否正确配置
- 检查 Node.js 和 pnpm 是否已安装

## 访问地址

服务启动后：
- 📱 前端界面: http://localhost:8000
- 🔌 后端 API: http://localhost:5000

## 建议

- 首次使用建议逐个窗口查看启动日志，确保服务正常运行
- 如果某个服务启动失败，会在对应窗口显示错误信息
- 保持终端窗口打开，方便随时查看日志
